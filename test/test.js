import React from 'react'
import { expect } from 'chai'
import { shallow, mount, render } from 'enzyme'
import { SearchPage, FacetItem } from '../app/jsx/pages/SearchPage.jsx'
import FooterComp from '../app/jsx/components/FooterComp.jsx'
import sinon from 'sinon'
import nock from 'nock'

// FacetItem  
// props = {
//   data: { facetType: 'departments',
//     ancestorChecked: true|false                     //Optional, only specified if facet has ancestors (departments)
//     facet: { value: 'uclalaw',
//       displayName: 'UCLA School of Law',            //Optional, if no displayName specified, uses facet.value for display
//       count: 331,
//       descendents: [                                //Optional, only specified if facet has children (departments)
//         {
//           ancestor_in_list: true,
//           count: 9,
//           displayName: 'The Williams Institute',
//           value: 'uclalaw_williams'
//         }
//       ]
//       ancestor_in_list: true|false,                 // Optional, only specified if facet has ancestors (departments),
//                                                     // and the ancestor is also in the facet list
//                                                     // Though it doesn't currently make sense for ancestor_in_list to be false,
//                                                     // the frontend doesn't assume that to be the case.
//     }
//   }
//   //Handler is FacetFieldset's handleChange function
//   handler: FacetFieldset.handleChange(event, filter=[], filter_cleanup=[])
//   //Query is an array of applied filters for the current fieldset (departments, in this case) ONLY
//   //child filters are not listed, since these are assumed under the parent 'uclalaw' and not included in the AWS query
//   //query is not defined if no filters are applied for the current fieldset
//   query: [{displayName: 'UCLA School of Law (All)', value: 'uclalaw'}]
// }
describe('<FacetItem />', () => {
  it ('contains div with className facetItem', () => {
    var props = { 
      facetType: 'departments', 
      facet: {
        value: 'uclalaw', 
        displayName: 'UCLA School of Law', 
        count: 331, 
        descendents: [
          {
            ancestor_in_list: true, 
            count: 9, 
            displayName: 'The Williams Institute', 
            value: 'uclalaw_williams'
          }
        ]
      }
    };
    expect(shallow(<FacetItem data={props}/>).hasClass("facetItem")).to.equal(true);
  });
});

var fixture = {
  "history":{},
  "location":{
    "pathname":"/search",
    "search":"?campuses=ucla&q=chinese",
    "hash":"",
    "state":null,
    "action":"POP",
    "key":"ltbrv9",
    "query":{
      "campuses":"ucla",
      "q":"chinese"
    },
    "$searchBase":{
      "search":"?campuses=ucla&q=chinese",
      "searchBase":""
    }
  },
  "params":{},
  "route":{"path":"/search"},
  "routeParams":{},
  "routes":[
    {
      "path":"/",
      "indexRoute":{},
      "childRoutes":[
        {"path":"/browse/:type"},
        {"path":"/browse/depts/:campusID"},
        {"path":"/unit/:unitID"},
        {"path":"/item/:itemID"},
        {"path":"/search"},
        {"path":"/static/:unitID/:pageName"},
        {"path":"/login"},
        {"path":"/loginSuccess"},
        {"path":"/logout"},
        {"path":"*"}
      ]
    },
    {
      "path":"/search"
    }
  ],
  "children":null
};

describe('<SearchPage />', () => {
  // it('calls componentDidMount', () => {
  //   sinon.spy(SearchPage.prototype, 'componentDidMount');
  //   const wrapper = mount(<SearchPage
  //     history={fixture.history}
  //     location={fixture.location}
  //     params={fixture.params}
  //     route={fixture.route}
  //     routes={fixture.routes}
  //     children={fixture.children}/>);
  //   expect(SearchPage.prototype.componentDidMount.calledOnce).to.equal(true);
  // });
  
  it ('properly selects checkboxes on back/forward browser actions', () => {
    nock('https://0.0.0.0:4000')
      .get('/api/search/?campuses=ucla&q=chinese')
      .reply(200, 
        {"count":2649,"query":{"q":"chinese","rows":"10","sort":"rel","start":"0","filters":{"campuses":{"display":"Campus","fieldName":"campuses","filters":[{"value":"ucla","displayName":"UCLA"}]}}},"searchResults":[{"id":"qt9q9165xg","title":"Chinese and Chinese American Life-Writing","genre":"article","rights":"public","content_type":"application/pdf","pub_date":"2015-01-01","pub_year":2015,"peerReviewed":true,"abstract":"Through a comparison of Chinese and Chinese American (auto)biographical accounts, this article facilitates a transpacific literary exchange that tracks cultural persistence and diffusion, offers a transnational perspective on the alleged absence of indigenous Chinese autobiography and the controversial use of fake “Orientalist” material in Chinese American life-writing, and highlights the need for bicultural literacy in grappling with this literature. Contesting Frank Chin’s categorical condemnation of autobiography (as a Western Christian contraption laden with self-hatred), I trace its manifestations in transpacific texts and the convergences in those texts: melding of autobiography and biography, salience of maternal legacies, and interdependent self-formation. Unlike the Chinese authors who lavish compliments on their forebears, however, the Chinese American authors do not scruple to disclose unseemly family secrets or to defy the boundaries between history and fiction—practices that some Asian American critics find vexing. I demonstrate that the critical qualms about Chinese American life-writing have to do with the politics of representation and that bicultural literacy can obviate cultural misreading.","supp_files":[{"type":"video","count":0},{"type":"image","count":0},{"type":"pdf","count":0},{"type":"audio","count":0}],"authors":[{"name":"Cheung, KK","email":"cheung@humnet.ucla.edu","fname":"KK","lname":"Cheung"}],"unitInfo":{"displayName":"UCLA Previously Published Works","unitId":"ucla_postprints"}},{"id":"qt2s39w33c","title":"Writing Concepts in Chinese Writing Instruction","genre":"article","rights":"public","content_type":"application/pdf","pub_date":"1994-12-30","pub_year":1994,"peerReviewed":true,"abstract":"Since Kaplan hypothesized English writing as direct and Oriental writing as circular in 1966, much research has been done in contrastive rhetoric. However, few studies have compared English writing and Asian writing in its original text or compared rhetoric across cultures. In addition, what causes Asian students to write differently from English speakers remains an arguable issue. In response to this debate, the researcher focuses on how Chinese writing instruction can cause negative interference for Chinese ESL students' writing in English. One representative work in Chinese literary criticism and four texts in Chinese rhetoric are analyzed to determine how Chinese and English writing utilize different rhetorical forms even though they may share some common elements.Specifically, this study shows that in Chinese writing the main idea can be more general, as a theme, or specific, as a thesis statement, and can come at the beginning or the end of a paper, although the end is preferred by most accomplished writers. In addition, a Chinese writer is expected to build the overall organization on word and sentence level structures and to use various indirect techniques to arouse the reader's interest in the aesthetics of a piece of writing. The writer does not have to state everything explicitly. Rather, the reader needs to share the writer's responsibility in creating a text by incorporating his or her own interpretation into the writing in Chinese rhetoric.","supp_files":[{"type":"video","count":0},{"type":"image","count":0},{"type":"pdf","count":0},{"type":"audio","count":0}],"authors":[{"name":"Wang, Xia","fname":"Xia","lname":"Wang","institution":"St. Cloud State University"}],"journalInfo":{"displayName":"Issues in Applied Linguistics, Volume 5, Issue 2","issueId":490,"unitId":"appling_ial"}},{"id":"qt61h3587v","title":"Charity with Chinese Characteristics","genre":"article","rights":"public","content_type":"application/pdf","pub_date":"2012-01-01","pub_year":2012,"peerReviewed":true,"abstract":"Over the past 30 years, scholars and activists have called on the Chinese government to ease the registration and oversight rules for non-governmental organizations (NGOs) and to increase funding for such organizations by, among other things, broadening the charitable deduction. While China has made significant progress in this regard, the government continues to throw up roadblocks for NGOs, suggesting that it has not fully embraced this path.This Article considers the extent to which the justifications for a broad charitable deduction adduced in the West make sense in China. The goal is to develop a normative basis for the deduction consistent with Chinese values and interests that Chinese authorities would find compelling. This Article also considers the extent to which China's political and social culture may affect efforts to foster an autonomous civil society through a broad charitable deduction. I conclude that even if China were to adopt Western-style laws governing NGOs and provide for a broad charitable deduction, China's culture would shape both how government officials implement the laws and how the Chinese people respond to them, resulting in a distinct system of charity with Chinese characteristics.","supp_files":[{"type":"video","count":0},{"type":"image","count":0},{"type":"pdf","count":0},{"type":"audio","count":0}],"authors":[{"name":"Chodorow, Adam","fname":"Adam","lname":"Chodorow"}],"journalInfo":{"displayName":"Pacific Basin Law Journal, Volume 30, Issue 1","issueId":1637,"unitId":"uclalaw_pblj"}},{"id":"qt9v40c1w2","title":"A semantic study of German and Chinese demonstratives","genre":"dissertation","rights":"public","content_type":"application/pdf","pub_date":"2013-01-01","pub_year":2013,"peerReviewed":true,"abstract":"This dissertation explores, analyzes, and compares the usage of German and Chinese demonstratives. Discourse and textual uses of the forms will be considered as well as their locative and temporal uses. I observe that in both languages the demonstratives can be used to refer to referents. However, they depart from the common assumption that proximal demonstratives refer to entities or places close to the speaker and non-proximal demonstratives to entities or places far from the speaker. Having analyzed a language sample consisting of a German text and a Chinese text, I argue that both German and Chinese proximal demonstratives can signal the meaning of HIGH DEIXIS in a semantic system of DEIXIS in the Columbia School of Linguistics framework, whereas their non-proximal demonstratives can signal the meaning of LOW DEIXIS. In addition, Chinese demonstratives can be used under more circumstances than German demonstratives due to the lack of articles in Chinese. I also argue that Cognitive Linguistic analysis will better help a new language learner, whereas Columbia School Linguistics may be of greater assistance if the learner has advanced to a level where he/she needs to know more about the intrinsic differences between words with similar meanings and usages.","supp_files":[{"type":"video","count":0},{"type":"image","count":0},{"type":"pdf","count":0},{"type":"audio","count":0}],"authors":[{"name":"Lin, Lin"}],"unitInfo":{"displayName":"UCLA Electronic Theses and Dissertations","unitId":"ucla_etd"}},{"id":"qt2c11g718","title":"The Academic and Social Integration of Chinese Doctoral Students into U.S. Universities and The Role of the Chinese Students and Scholars Association (CSSA)","genre":"dissertation","rights":"public","content_type":"application/pdf","pub_date":"2013-01-01","pub_year":2013,"peerReviewed":true,"abstract":"Using Tinto's retention model while being critical, in this qualitative study, the researcher examined the experience of Chinese doctoral students by conducting continuous formative and summative research in Chinese doctoral students' needs, adjustment problems, academic study, and living experiences in two geographically different U.S. universities, UCLA and Indiana University (IU). In the form of two case studies (Yin, 2003), 15 doctoral students, 5 Chinese Students and Scholars Association (CSSA) organizers, and university administrators at each site have been structurally interviewed. Three other types of data have also been collected, ethnographical observation notes, CSSA website and mailing information analyses, and university documents regarding international students. Using inductive methods, the researcher employed Atlas-ti, a qualitative coding program to analyze the data. As a conclusion, as Hofstede and Bond (1999) stated, American and Chinese cultures represent two extremes of the cultural continuum, with respect to the particular dimensions of culture, such as individualism versus collectivism. Due to considerable cultural differences, the transition from studying in a Chinese academic setting to an American one may suggest great difficulties for Chinese students. This study intends to address policy implications in improving international students' wellbeing in their foreign sojourn by highlighting, for example, how a campus can promote student organizations as a socialization agent for international students regardless of their country of origin.","supp_files":[{"type":"video","count":0},{"type":"image","count":0},{"type":"pdf","count":0},{"type":"audio","count":0}],"authors":[{"name":"Li, Xiaoan"}],"unitInfo":{"displayName":"UCLA Electronic Theses and Dissertations","unitId":"ucla_etd"}},{"id":"qt6xg6602w","title":"The Lure of Chinese State Capitalism in Latin America: Influence, Investments and Imports","genre":"dissertation","rights":"public","content_type":"application/pdf","pub_date":"2015-01-01","pub_year":2015,"peerReviewed":true,"abstract":"This work proposes and explains a political-economic concept, defined here as the neoliberal-dirigiste continuum, which offers an explanation of the manner in which Chinese capital and Chinese State Capitalism have been invested and received in different ways across the distinct geographies and countries in Latin America over the last three decades.  While bilateral trade is one measure used to gauge the attractiveness of the Chinese state capitalist model in targeted Latin American economies, foreign direct investment (FDI) and economic aid/assistance by Chinese firms and Chinese government actors are other mechanisms through which Chinese economic engagement in the region can be assessed. This dissertation employs a mixed-methods approach to developing a Chinese economic engagement framework given particular and distinct Latin American foreign policies. The geographic variation of the success of recent Chinese economic activity (particularly foreign investment) in nine targeted Latin American economies (Colombia, Chile, Peru, México, Brazil, Argentina, Ecuador, Bolivia and Venezuela) is examined in order to understand Chinese economic actors' engagement in the region compared with that of European and US economic actors.","supp_files":[{"type":"video","count":0},{"type":"image","count":0},{"type":"pdf","count":0},{"type":"audio","count":0}],"authors":[{"name":"Narins, Thomas Peter"}],"unitInfo":{"displayName":"UCLA Electronic Theses and Dissertations","unitId":"ucla_etd"}},{"id":"qt6sq8s2vz","title":"The Lure of Chinese State Capitalism in Latin America: Influence, Investments and Imports","genre":"dissertation","rights":"public","content_type":"application/pdf","pub_date":"2015-01-01","pub_year":2015,"peerReviewed":true,"abstract":"This work proposes and explains a political-economic concept, defined here as the neoliberal-dirigiste continuum, which offers an explanation of the manner in which Chinese capital and Chinese State Capitalism have been invested and received in different ways across the distinct geographies and countries in Latin America over the last three decades.  While bilateral trade is one measure used to gauge the attractiveness of the Chinese state capitalist model in targeted Latin American economies, foreign direct investment (FDI) and economic aid/assistance by Chinese firms and Chinese government actors are other mechanisms through which Chinese economic engagement in the region can be assessed. This dissertation employs a mixed-methods approach to developing a Chinese economic engagement framework given particular and distinct Latin American foreign policies. The geographic variation of the success of recent Chinese economic activity (particularly foreign investment) in nine targeted Latin American economies (Colombia, Chile, Peru, México, Brazil, Argentina, Ecuador, Bolivia and Venezuela) is examined in order to understand Chinese economic actors' engagement in the region compared with that of European and US economic actors.","supp_files":[{"type":"video","count":0},{"type":"image","count":0},{"type":"pdf","count":0},{"type":"audio","count":0}],"authors":[{"name":"Narins, Thomas Peter"}],"unitInfo":{"displayName":"UCLA Electronic Theses and Dissertations","unitId":"ucla_etd"}},{"id":"qt03j122gn","title":"S.F. Chinese Immigrant Voters Persistency in Voter Registration","genre":"article","rights":"public","content_type":"application/pdf","pub_date":"2007-01-01","pub_year":2007,"peerReviewed":null,"abstract":"This working paper assesses the durability of Chinese-American political participation in the San Francisco Bay Area between 1996 and 2004. We are interested in this durability, which we call “survival,” for two reasons. First, because it gives us a better understanding of the universe of the population we are trying to study. Our survey was culled from those members of the 1996 cohort who are on the most recent registration rolls, which means that it contains information on only those members of the 1996 cohort who remained politically active. It is therefore useful for us to learn more about the characteristics of this group, and to determine what characteristics contribute to their continued political action. In particular, we want to know if the continued Chinese-American participation is a specifically ethnic phenomenon; that is, if the durability of the Chinese-American registration is owed to their being Chinese American, rather than to other factors (such as income or age or gender). If the continued Chinese-American registration is ethnic in nature, this would lend credence to our hypothesis that the large surge in political activity in 1996 by Chinese Americans was a defensive reaction, and one that remains influential today.     Our second reason for performing this analysis is more academic: the data themselves tell an interesting story about the durability of political involvement. Political scientists have long concerned themselves with patterns of electoral participation, and in efforts to determine why political participation increases for some individuals and declines for others. Thus while our primary purpose in this duration analysis is to better understand this Bay Area Chinese-American population, a secondary benefit is that it yields us a useful experiment that can contribute to the more general literature in political science.     We use registration to vote as our proxy for political activity, and the sample is, again, drawn from the 1996 cohort of first-time Chinese-American registers. The 1996 cohort is a useful one to study because, as we have noted in previous sections, 1996 marked a significant upsurge in Chinese-American political activity in the Bay Area, largely as a reaction to anti-immigrant legislation. The 1980s and early 1990s witnessed an increase in anti-immigrant sentiment in both American politics at large and California in particular—a number of anti-immigrant measures were either proposed or passed by voters in California. The threat to immigrants posed by these measures prompted a significant increase in naturalization rates and voting on the part of Bay Area Chinese Americans, culminating in a large cohort of Chinese Americans that voted in the national elections of 1996.  Naturalization was an understandable and predictable reaction for Chinese Americans. Naturalization not only provided protection against anti-immigrant measures, but also provided a voice with which the newly naturalized could help shape future policies. The durability of Chinese-American political engagement, however, is less easy to predict. Two conflicting dynamics are at work.  On the one hand, ethnic mobilization, and particularly defensive mobilization, can be short-lived. Political activity spawned by a particular issue or threat also tends to be transitory; once the threat subsides, levels of political participation can also decay. Evidence also suggests, however, that political activity tends to predict itself—that once the initial foray into politics is made, subsequent involvement becomes easier and more common. In this framework ethnic mobilization, regardless of its root cause, would set in motion a positive cycle that leads to continued involvement. Lastly, of course, we should also include the possibility that the perceived threat has not subsided; if anti-immigrant sentiment remains strong, so too might the political participation of immigrant groups.     We should note that Chinese Americans who registered for the first time in 1996 did not necessarily naturalize and register that year. Certainly some of them may have. But the sample may also include Chinese Americans who naturalized earlier but did not become impelled to register until 1996. Either way would represent a significant step toward political activity, and makes 1996 a useful starting point for our study.     Anecdotal and descriptive data suggests that Chinese Americans have remained politically active in the Bay Area, and that indeed they have emerged as an important swing voting bloc in municipal elections (Lee, 2003). Chinese Americans have been credited with helping Gavin Newsom win the San Francisco mayoral race in 2004. In this study we use a survey and duration analysis to determine whether Chinese-American voting activity has in fact endured in the ten years since the 1996 cohort. Our results suggest that this is the case; Chinese Americans from the Bay Area cohort remain politically active.","supp_files":[{"type":"video","count":0},{"type":"image","count":0},{"type":"pdf","count":0},{"type":"audio","count":0}],"authors":[{"name":"Ong, Paul M.","email":"pmong@ucla.edu","fname":"Paul","lname":"Ong","mname":"M.","institution":"UCLA"},{"name":"Manville, Mike","fname":"Mike","lname":"Manville","institution":"UCLA"}],"unitInfo":{"displayName":"On-Line Working Paper Series","unitId":"ccpr_olwp"}},{"id":"qt74z6f9v7","title":"Teaching Chinese Cultural Perspectives through Film","genre":"article","rights":"public","content_type":"application/pdf","pub_date":"2011-01-01","pub_year":2011,"peerReviewed":true,"abstract":"Teaching Chinese cultural perspectives in CFL instruction is more challenging than teaching about Chinese cultural products and behavior. It is challenging because most textbooks do not orient their approach to it, because native-Chinese-speaking teachers tend to overlook it as it is so much a part of them that it presents no peculiarities, and because it is believed cultural understanding comes naturally once language is learned. Studies on cross-cultural communication demonstrate that cultural ignorance causes misperceptions and misunderstandings. In a global community, as people of different cultures interact with one another, awareness of different cultural perspectives is urgently needed. Since language and culture go hand in hand, learning a language is a fortunate opportunity to learn culture through language. Employing a critical language pedagogy, this paper provides an example for teaching Chinese cultural perspectives though discourse from film clips. It shows how students can be taught differences, alternatives, and critical language and cultural awareness using comparative, reflective, and interpretive methodologies. It employs a variety of situated activities to help students explore and discover the Chinese cultural mind.","supp_files":[{"type":"video","count":0},{"type":"image","count":0},{"type":"pdf","count":0},{"type":"audio","count":0}],"authors":[{"name":"Zhang, Lihua","email":"zhanglihua@berkeley.edu","fname":"Lihua","lname":"Zhang","institution":"University of California - Berkeley"}],"journalInfo":{"displayName":"L2 Journal, Volume 3, Issue 2","issueId":966,"unitId":"uccllt_l2"}},{"id":"qt60h022hg","title":"Dislocation focus construction in Chinese","genre":"article","rights":"public","content_type":"application/pdf","pub_date":"2009-08-01","pub_year":2009,"peerReviewed":true,"abstract":"The use of the Dislocation Focus Construction (DFC) (also known as “Right Dislocation”) in colloquial Chinese (including Cantonese and Mandarin) gives rise to various non-canonical word orders. In DFCs, the sentence particle (SP) occurs in a sentence-medial position. The pre- and post-SP materials are demonstrated to be syntactically connected, based on four diagnostic tests, namely (i) the zinghai ‘only’ test, (ii) the doudai (“wh-the-hell”) test, (iii) polarity item licensing, and (iv) Principle C violations. The findings offer new insights into the syntax of the Chinese left periphery and constraints on focus movement. First, the observations entail that Chinese CPs are head-initial, and an XP is obligatorily moved around the SP to a position higher than the CP. Second, the XP-raising in the DFC is argued to be driven by focus because of the focus interpretation induced. It is discovered that the focus movement is subject to the Spine Constraint, which turns out to be remarkably similar to the properties of the Nuclear Stress Rule (e.g., selection of focus set and metrical invisibility). It is argued that the DFC is the syntactic realization of the rule.\n","supp_files":[{"type":"video","count":0},{"type":"image","count":0},{"type":"pdf","count":0},{"type":"audio","count":0}],"authors":[{"name":"Cheung, Lawrence Yam-Leung"}],"unitInfo":{"displayName":"UCLA Previously Published Works","unitId":"ucla_postprints"}}],"facets":[{"display":"Type of Work","fieldName":"type_of_work","facets":[{"value":"article","count":1698,"displayName":"Article"},{"value":"monograph","count":17,"displayName":"Book"},{"value":"dissertation","count":934,"displayName":"Theses"},{"value":"multimedia","count":0,"displayName":"Multimedia"}]},{"display":"Peer Review","fieldName":"peer_reviewed","facets":[{"value":"1","count":0,"displayName":"Peer-reviewed only"}]},{"display":"Included Media","fieldName":"supp_file_types","facets":[{"value":"video","count":0,"displayName":"Video"},{"value":"audio","count":0,"displayName":"Audio"},{"value":"images","count":0,"displayName":"Images"},{"value":"zip","count":0,"displayName":"Zip"},{"value":"other files","count":0,"displayName":"Other files"}]},{"display":"Publication Year","fieldName":"pub_year","range":{"pub_year_start":null,"pub_year_end":null}},{"display":"Campus","fieldName":"campuses","facets":[{"value":"ucb","count":2522,"displayName":"UC Berkeley"},{"value":"ucd","count":576,"displayName":"UC Davis"},{"value":"uci","count":1867,"displayName":"UC Irvine"},{"value":"ucla","count":2649,"displayName":"UCLA"},{"value":"ucm","count":262,"displayName":"UC Merced"},{"value":"ucr","count":705,"displayName":"UC Riverside"},{"value":"ucsd","count":1479,"displayName":"UC San Diego"},{"value":"ucsf","count":431,"displayName":"UC San Francisco"},{"value":"ucsb","count":487,"displayName":"UC Santa Barbara"},{"value":"ucsc","count":996,"displayName":"UC Santa Cruz"},{"value":"ucop","count":180,"displayName":"UC Office of the President"},{"value":"lbnl","count":0,"displayName":"Lawrence Berkeley National Laboratory"}]},{"display":"Departments","fieldName":"departments","facets":[{"value":"uclalaw","count":331,"displayName":"UCLA School of Law","descendents":[{"value":"uclalaw_williams","count":9,"displayName":"The Williams Institute","ancestor_in_list":true}]},{"value":"international","count":127,"displayName":"UCLA International Institute","descendents":[{"value":"international_asc","count":77,"displayName":"James S. Coleman African Studies Center","ancestor_in_list":true},{"value":"asia","count":12,"displayName":"UCLA Asia Institute","ancestor_in_list":true,"descendents":[{"value":"ccs","count":1,"displayName":"UCLA Center for Chinese Studies","ancestor_in_list":true}]},{"value":"international_uclacseas","count":10,"displayName":"UCLA Center for Southeast Asian Studies","ancestor_in_list":true},{"value":"international_cees","count":4,"displayName":"UCLA Center for European and Eurasian Studies","ancestor_in_list":true}]},{"value":"ccpr","count":86,"displayName":"California Center for Population Research"},{"value":"uclaling","count":67,"displayName":"Department of Linguistics, UCLA"},{"value":"ucla_healthpolicy","count":62,"displayName":"UCLA Center for Health Policy Research"},{"value":"uctc","count":62,"displayName":"University of California Transportation Center"},{"value":"appling","count":57,"displayName":"Department of Applied Linguistics"},{"value":"csw","count":53,"displayName":"UCLA Center for the Study of Women"},{"value":"uclalib","count":44,"displayName":"UCLA Library","descendents":[{"value":"uclalib_dsc","count":6,"displayName":"UCLA Library Special Collections","ancestor_in_list":true}]},{"value":"uccllt","count":39,"displayName":"UC Consortium for Language Learning & Teaching"},{"value":"issr","count":37,"displayName":"Institute for Social Science Research","descendents":[{"value":"cstch","count":7,"displayName":"Center for Social Theory and Comparative History","ancestor_in_list":true}]},{"value":"uclaspa","count":32,"displayName":"UCLA School of Public Affairs","descendents":[{"value":"lewis","count":21,"displayName":"The Ralph and Goldy Lewis Center for Regional Policy Studies","ancestor_in_list":true}]},{"value":"gseis","count":30,"displayName":"UCLA Graduate School of Education and Information Studies"},{"value":"uclairle","count":25,"displayName":"The Institute for Research on Labor and Employment"},{"value":"uclastat","count":23,"displayName":"Department of Statistics, UCLA","descendents":[{"value":"uclastat_cts","count":1,"displayName":"Center for the Teaching of Statistics","ancestor_in_list":true}]},{"value":"uclabiolchem","count":22,"displayName":"Department of Biological Chemistry, UCLA, David Geffen School of Medicine"},{"value":"ismrg","count":21,"displayName":"Italian Studies Multicampus Research Group"},{"value":"ucla_spanport","count":19,"displayName":"Department of Spanish and Portuguese (UCLA)"},{"value":"civilrightsprojectucla","count":15,"displayName":"The Civil Rights Project / Proyecto Derechos Civiles"},{"value":"uclapsych","count":14,"displayName":"UCLA Department of Psychology"},{"value":"pacrim","count":11,"displayName":"Pacific Rim Research Program"},{"value":"anderson","count":9,"displayName":"Anderson Graduate School of Management","descendents":[{"value":"anderson_fin","count":2,"displayName":"Finance","ancestor_in_list":true},{"value":"anderson_dotm","count":1,"displayName":"Decisions, Operations, and Technology Management","ancestor_in_list":true}]},{"value":"uclasoc","count":9,"displayName":"Department of Sociology, UCLA"},{"value":"lmri","count":8,"displayName":"University of California Linguistic Minority Research Institute"},{"value":"cioa","count":7,"displayName":"Cotsen Institute of Archaeology"},{"value":"ucla_french","count":7,"displayName":"UCLA Department of French and Francophone Studies"},{"value":"cmrs","count":6,"displayName":"Center for Medieval and Renaissance Studies"},{"value":"hcs","count":5,"displayName":"Human Complex Systems"},{"value":"ile","count":5,"displayName":"University of California Institute for Labor and Employment"},{"value":"italian_ucla","count":5,"displayName":"Department of Italian, UCLA"},{"value":"idea","count":4,"displayName":"UCLA's Institute for Democracy, Education, and Access"},{"value":"ucwhw","count":4,"displayName":"UC World History Workshop"},{"value":"wrc","count":4,"displayName":"University of California Water Resources Center","descendents":[{"value":"wrca","count":2,"displayName":"Water Resources Collections and Archives","ancestor_in_list":true}]},{"value":"cens","count":3,"displayName":"Center for Embedded Network Sensing"},{"value":"english_ucla","count":3,"displayName":"Department of English"},{"value":"germanic","count":3,"displayName":"Department of Germanic Languages"},{"value":"ucla_csrc","count":3,"displayName":"Chicano Studies Research Center"},{"value":"ioes","count":2,"displayName":"Institute of the Environment and Sustainability"},{"value":"lgbtqstudiesucla","count":2,"displayName":"LGBTQ Studies"},{"value":"ucla_biostatistics","count":2,"displayName":"Biostatistics"},{"value":"anderson_dotm","count":1,"displayName":"Decisions, Operations, and Technology Management","ancestor_in_list":true},{"value":"cfg","count":1,"displayName":"Center for Governance"},{"value":"hasom_musicology","count":1,"displayName":"Department of Musicology"},{"value":"ucei","count":1,"displayName":"University of California Energy Institute"},{"value":"ucolick","count":1,"displayName":"UC Observatories"}]},{"display":"Journal","fieldName":"journals","facets":[{"value":"uclalaw_pblj","count":167,"displayName":"Pacific Basin Law Journal"},{"value":"international_asc_ufahamu","count":75,"displayName":"Ufahamu: A Journal of African Studies"},{"value":"appling_ial","count":57,"displayName":"Issues in Applied Linguistics"},{"value":"uccllt_l2","count":39,"displayName":"L2 Journal"},{"value":"ucla_history_historyjournal","count":37,"displayName":"UCLA Historical Journal"},{"value":"uclalib_egj","count":31,"displayName":"Electronic Green Journal"},{"value":"gseis_interactions","count":29,"displayName":"InterActions: UCLA Journal of Education and Information Studies"},{"value":"uclalaw_nblj","count":24,"displayName":"National Black Law Journal"},{"value":"ismrg_cisj","count":21,"displayName":"California Italian Studies"},{"value":"uclabiolchem_nutritionbytes","count":16,"displayName":"Nutrition Bytes"},{"value":"uclalaw_elr","count":16,"displayName":"UCLA Entertainment Law Review"},{"value":"uclalaw_wlj","count":16,"displayName":"UCLA Women's Law Journal"},{"value":"ucla_spanport_mester","count":14,"displayName":"Mester"},{"value":"uclalaw_cllr","count":14,"displayName":"Chicana/o Latina/o Law Review"},{"value":"uclalaw_jelp","count":14,"displayName":"UCLA Journal of Environmental Law and Policy"},{"value":"uclapsych_ijcp","count":14,"displayName":"International Journal of Comparative Psychology"},{"value":"uclalaw_jsp","count":10,"displayName":"Journal of Scholarly Perspectives"},{"value":"uclalaw_apalj","count":8,"displayName":"Asian Pacific American Law Journal"},{"value":"ucla_french_pg","count":7,"displayName":"Paroles gelées"},{"value":"uclabiolchem_nutritionnoteworthy","count":6,"displayName":"Nutrition Noteworthy"},{"value":"italian_ucla_carteitaliane","count":5,"displayName":"Carte Italiane"},{"value":"ucla_spanport_voices","count":4,"displayName":"Voices"},{"value":"cmrs_comitatus","count":3,"displayName":"Comitatus: A Journal of Medieval and Renaissance Studies"},{"value":"cmrs_litteraecaelestes","count":3,"displayName":"Litterae Caelestes"},{"value":"germanic_newgermanreview","count":3,"displayName":"New German Review: A Journal of Germanic Studies"},{"value":"regeneracion_tlacuilolli","count":3,"displayName":"Regeneración Tlacuilolli: UCLA Raza Studies Journal"},{"value":"queercatsjournal","count":2,"displayName":"Queer Cats Journal of LGBTQ Studies"},{"value":"ao4elt4","count":1,"displayName":"Adaptive Optics for Extremely Large Telescopes 4 – Conference Proceedings"},{"value":"limn","count":1,"displayName":"Limn"},{"value":"ucla_spanport_gradproceedings","count":1,"displayName":"The Proceedings of the UCLA Department of Spanish and Portuguese Graduate Conference"},{"value":"uclaspa_criticalplanning","count":1,"displayName":"Critical Planning"},{"value":"uclastat_cts_tise","count":1,"displayName":"Technology Innovations in Statistics Education"}]},{"display":"Discipline","fieldName":"disciplines","facets":[{"value":"Social and Behavioral Sciences","count":152},{"value":"Arts and Humanities","count":145},{"value":"Law","count":66},{"value":"Education","count":38},{"value":"Engineering","count":25},{"value":"Business","count":21},{"value":"Life Sciences","count":20},{"value":"Medicine and Health Sciences","count":20},{"value":"Physical Sciences and Mathematics","count":20},{"value":"Architecture","count":10}]},{"display":"Reuse License","fieldName":"rights","facets":[{"value":"public","count":2591,"displayName":"Public"},{"value":"CC BY-NC-ND","count":19,"displayName":"BY-NC-ND - Attribution; NonCommercial use; No derivatives"},{"value":"CC BY","count":17,"displayName":"BY - Attribution required"},{"value":"CC BY-NC","count":12,"displayName":"BY-NC - Attribution; NonCommercial use only"},{"value":"CC BY-NC-SA","count":7,"displayName":"BY-NC-SA - Attribution; NonCommercial use; Derivatives use same license"},{"value":"CC BY-SA","count":3,"displayName":"BY-SA - Attribution; Derivatives must use same license"}]}]}
      );
    
    const wrapper = mount(<SearchPage 
      history={fixture.history} 
      location={fixture.location} 
      params={fixture.params} 
      route={fixture.route} 
      routes={fixture.routes} 
      children={fixture.children}/>);

    expect(wrapper.props().location.query.campuses).to.equal('ucla');
    expect(wrapper.props().location.query.q).to.equal('chinese');
    
    setTimeout(() => {
      expect(wrapper.state().pageData.count).to.equal(2649);
      var facetItems = wrapper.find(FacetItem);
      expect(facetItems).to.be.above(0);
    }, 1500);
    
  });
  
  // it('calls pageDataURL', () => {
  //   sinon.spy(SearchPage.prototype, 'pageDataURL');
  //   const wrapper = mount(<SearchPage
  //     history={fixture.history}
  //     location={fixture.location}
  //     params={fixture.params}
  //     route={fixture.route}
  //     routes={fixture.routes}
  //     children={fixture.children}/>);
  //
  //     console.log(wrapper.props());
  //     console.log(SearchPage.prototype.pageDataURL(wrapper.props()));
  //     // expect(SearchPage.prototype.pageDataURL.calledOnce).to.equal(true);
  //     // console.log(SearchPage.fetchState.getCall(0).args);
  //     console.log(wrapper.state());
  // });
  
  // it('calls fetchState', () => {
  //   // var spy = sinon.spy();
  //   sinon.spy(SearchPage.prototype, 'fetchState');
  //   const wrapper = mount(<SearchPage
  //     history={fixture.history}
  //     location={fixture.location}
  //     params={fixture.params}
  //     route={fixture.route}
  //     routes={fixture.routes}
  //     children={fixture.children}/>);
  //
  //   // console.log(spy.args);
  //   console.log(wrapper.props());
  //   wrapper.fetchState(done);
  //   expect(SearchPage.prototype.fetchState.calledOnce).to.equal(true);
  //   // console.log(SearchPage.fetchState.getCall(0).args);
  //   console.log(wrapper.state());
  // });
});